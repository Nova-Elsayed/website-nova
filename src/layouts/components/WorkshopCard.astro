---
import { slugify } from "@/lib/utils/textConverter";
import { locationToAddress } from "@/lib/utils/locationParser";
import { simpleGermanDate } from "@/lib/utils/dateParser";

const { title, location, headline, parentTitle, dateStart } = Astro.props.data;
const slug = slugify(title);

const address = await locationToAddress(location);
const readableDate = simpleGermanDate(dateStart);
---

<li class="w-1/3 p-4">
  <a
    class="block transition-all group hover:scale-110"
    href={`/workshops/${slug}/`}
  >
    <h3
      set:html={headline}
      class="text-xl text-red-500 group-transition-colors group-hover:text-red-300"
    />
    {readableDate && <p set:html={readableDate} />}
    {parentTitle && <p class="mt-2 font-secondary" set:html={parentTitle} />}
    {address && <p set:html={address.city || address.village} />}
  </a>
</li>
