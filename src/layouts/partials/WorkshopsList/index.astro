---
import type { Workshop } from "@/lib/contentful";
import { locationToAddress } from "@/lib/utils/locationParser";

const workshops = Astro.props.workshops;
---

<ul class="my-8">
  <!-- Old Workshop list for non TicketTailor Workshops 
  {
    workshops.map((workshop: Workshop) => {
      return (
        <li class="w-1/3 p-4">
          <a
            class="block transition-all group hover:scale-110"
            href={`/workshops/${workshop.props.slug}/`}
          >
            <h3
              set:html={workshop.props.headline}
              class="text-xl text-red-500 group-transition-colors group-hover:text-red-300"
            />
            {workshop.props.parentTitle && (
              <p
                class="mt-2"
                set:html={workshop.props.parentTitle}
              />
            )}
            {async () => {
              const address = await locationToAddress(workshop.props.location);

              return <p set:html={address.city || address.village} />;
            }}

            {workshop.props.readableDate && (
              <p set:html={workshop.props.readableDate} />
            )}
          </a>
        </li>
      );
    })
  }
    -->

    {
      workshops.map((workshop, index) => {
        // console.log(workshop);
        return (
        <li key={index} class="mt-16 mb-24">
          <a
            class="block transition-all group hover:scale-110"
            href={workshop.props.URL}
          >
            <h4
              set:html={workshop.props.name}
              class="mb-2 text-2xl text-red-500 group-transition-colors group-hover:text-red-300"
            />

            {workshop.props.readableDate && (
              <p class="mb-4 text-sm" set:html={workshop.props.readableDate} />
            )}

            <p class="mt-2 text-sm italic text-center transition-opacity opacity-0 text-stone-500 group-hover:opacity-100">
              Erfahre mehr …
            </p>
            <p class="text-sm mt-2 text-center text-stone-500">— &#10086; —</p>
          </a>
        </li>
      );
      })
    }
</ul>
